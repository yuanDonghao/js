<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>AJAX封装</title>
</head>
<body>
	
</body>
<script>
	function ajax(method, url, params, done) {
		method = method.toUpperCase()
		var xhr = new XMLHttpRequest()

		if (typeof params === 'object') {
			var tempArr = []
		  for (var key in params) {
		  	var value = params[key]
		  	tempArr.push(key + '=' + value)
		  }
		  params = tempArr.join('&')
		}

		if (method === 'GET') {
			url += '?' + params
		}

		xhr.open(method, url, true)

		var data = null
		if(method === 'POST') {
			xhr.setRequestHeader('Contnt-Type', 'application/x-www-form-urlencoded')
			data = params
		}
		xhr.onreadystatechange = function() {
			if(this.readyState !== 4) return
				done(this.responseText)
		}
		xhr.send(data)
	}
	var onDone = function(res) {
		console.log('111')
		console.log('222')
		console.log(res)
		console.log('完事')
	}

	ajax('get', 'time.php', {}, onDone)

</script>
</html>